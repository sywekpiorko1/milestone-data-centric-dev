<!--TO BE FINISHED -->


{% extends 'base.html' %} {% block main_content %}

<div class="container">
  <div class="col s12 m6 l4">
    <div class="card horizontal z-depth-3">
      <div class="card-image">
        <img src="{{recipe.photo}}">
      </div>
      <div class="card-stacked">
        <div class="card-action">
          <a href="#" onclick="history.go(-1)">BACK</a>
        </div>
        <div class="card-content">

          <!-- VOTE UP or REMOVE VOT UP -->

          {% if viewer != 'anonim' and viewer !=recipe.author %}
          {% if voted_up_by_viewer %}
          <a href="{{ url_for('remove_vote_up', recipe_id=recipe._id, viewer=viewer) }}" title="Remove Grade UP!"
            class="ngl0 btn-floating waves-effect waves-light amber pulse"><i class="material-icons">favorite_border</i></a>
          {% else %}
          <a href="{{ url_for('vote_up', recipe_id=recipe._id, viewer=viewer) }}" title="Grade UP!"
            class="ngl0 btn-floating waves-effect waves-light grey lighten-2 pulse"><i
              class="material-icons">favorite</i></a>
          {% endif %}
          {% endif %}

          <!-- EDIT -->

          {% if viewer == recipe.author or viewer == 'admin' %}
          <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" title="Edit"
            class="{% if viewer == 'admin' %}ngl1{% else %}ngl0{% endif %} btn-floating waves-effect waves-light green"><i
              class="material-icons">edit</i></a>
          {% endif %}


          <!-- DELETE FROM DATABASE -->

          {% if viewer == recipe.author or viewer == 'admin' %}
          <a href="#removeModal" class="modal-trigger ngl2 btn-floating waves-effect waves-light pink darken-4" title="REMOVE"><i
              class="material-icons">delete</i></a>

          <div class="modal" id="removeModal">
            <div class="modal-content">
              <h4>Warnig !</h4>
              <p>Are You sure You want to delete recipe permanently ?</p>
            </div>
            <div class="modal-footer">
              <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" class="btn red" title="REMOVE">DELETE</a>
              <a href="#" class="modal-close btn green">NO - go back</a>
            </div>
          </div>
          {% endif %}

          <h6 class="center-align"><i>Cuisine: {{ recipe.cuisine }}</i></h6>
          <h4 class="header">{{recipe.meal}}</h4>
          <p>{{recipe.instructions}}</p>
        </div>
        <div class="card-content">
          <h4 class="header">Ingredients</h4>
          {% for ingredient in recipe.ingredients %}
          <p>{{ingredient}}</p>
          {% endfor %}
        </div>
        <div class="card-action">
          <a href="#" onclick="history.go(-1)">BACK</a>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock main_content %}