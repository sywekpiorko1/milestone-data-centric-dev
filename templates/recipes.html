{% extends 'base.html' %} {% block main_content %}

<!-- action button for filter/search reveal/hide -->
<div class="fixed-action-btn">
  <a id="show" class="btn-floating btn waves-effect waves-light">
    <i class="large material-icons">search</i>
  </a>
</div>

<div class="container container-mainpage">

  {% if count == 0 %}
  <h6 class="center-align">Sorry, we have no recipes matching criteria.</h6>
  <h6 class="center-align">Try another search.</h6>
  {% else %}
  <h6 class="center-align">Found&nbsp;{{ count }}
    {% if count > 1 %}
    recipes
    {% else %}
    recipe
    {% endif %}
    in CookBook.</h6>
  {% endif %}

  <!-- Pagination on TOP -->

  <div class="row">
    <div class="col l9 offset-l3 m12 s12">
      <ul class="pagination center-align">
        {% if p_offset > 0 %}
        <li class="waves-effect"><a href="{{ prev_url }}"><i class="material-icons">chevron_left</i></a></li>
        {% endif %}
        {% if (p_offset > 0) or (p_offset + p_limit <  count) %}
        <li class="line-height-2">
          page {{ ( p_offset // p_limit )  + 1 }} of
          {% if count % p_limit == 0 %}
          {{ (count // p_limit) }}
          {% else %}
          {{ ( count // p_limit) + 1 }}
          {% endif %}
        </li>
        {% endif %}
        {% if p_offset + p_limit <  count %}
        <li class="waves-effect"><a href="{{ next_url }}"><i class="material-icons">chevron_right</i></a></li>
        {% endif %}
      </ul>
    </div>
  </div>

  <div class="row">

    <!-- FILTER and SEARCH -->

    <div class="filterSearch col s10 offset-s1 m6 offset-m3 l3 z-depth-3 white-background">

      {% include "_filter.html"  %}

      {% include "_search.html" %}

      <div class="center">
        <div class="row">
          <button class="btn btn waves-effect waves-light purple accent-2 z-depth-3 myClicableBox" type="button"><a
              href="{{ url_for('get_recipes', limit=8, offset=0) }} " class="white-text">RESET</a>
            <i class="material-icons right">cached</i>
          </button>
        </div>
      </div>

    </div>

    <!-- RECIPES CARDS -->

    <div class="col cards s12 m12 l9">

      {% for recipe in recipes %}

      {% include "recipesTemplateCards.html"  %}

      {% endfor %}

    </div>
  </div>

  <!-- Pagination on BOTTOM -->
  <div class="row">
    <div class="col l9 offset-l3 m12 s12">
      <ul class="pagination center-align">
        {% if  (count - p_offset) > 4  %}
        {% if p_offset > 0 %}
        <li class="waves-effect"><a href="{{ prev_url }}"><i class="material-icons">chevron_left</i></a></li>
        {% endif %}

        {% if p_offset + p_limit <  count %}
        <li class="waves-effect"><a href="{{ next_url }}"><i class="material-icons">chevron_right</i></a></li>
        {% endif %}
        {% endif %}
      </ul>
    </div>
  </div>

  {% endblock main_content %}